import numpy as np 
import matplotlib.pyplot as plt 

estimate_pos = [ [[-65.74986809],
 [-28.21088473],
 [ 44.7858232 ],],

 [[ 62.54846475],
 [-24.0960515 ],
 [ 30.15389432],],

 [[ 63.37762937],
 [-30.155244  ],
 [ 31.97915322],],

 [[ 62.5647447 ],
 [-25.68942161],
 [ 32.73834494],],

 [[ 54.13142741],
 [-29.76133791],
 [ 28.37035185],],

 [[ 62.22863345],
 [-25.48872864],
 [ 33.77534346],],

 [[-263.64080702],
 [  43.43956273],
 [  24.54219778],],

 [[ 59.13236749],
 [-29.23609207],
 [ 35.02634493],],

 [[ 60.76258259],
 [-26.44514355],
 [ 34.42226171],],

 [[ 48.30737626],
 [-28.00987177],
 [ 29.29615933],],

 [[ 50.31752562],
 [-27.74573505],
 [ 32.52999954],],

 [[ 41.65382642],
 [-31.70758747],
 [ 29.39831176],],

 [[ 32.16336575],
 [-26.36971824],
 [ 27.60585168],],

 [[ 31.01343413],
 [-29.26159098],
 [ 30.29709449],],

 [[ 34.01057413],
 [-28.07249732],
 [ 31.36516438],],

 [[ 28.1819558 ],
 [-28.11709434],
 [ 30.76347206],],

 [[ 24.06098004],
 [-27.33120548],
 [ 28.56642355],],

 [[ 20.03532593],
 [-26.35003465],
 [ 29.24403765],],

 [[ 26.63799801],
 [-23.31443661],
 [ 32.19508268],],

 [[ 24.77625096],
 [-24.31892138],
 [ 32.57956814],],

 [[ 14.0501374 ],
 [-20.73307038],
 [ 29.58220744],],

 [[ 29.05328149],
 [-26.21309031],
 [ 38.17368008],],

 [[ 10.57315096],
 [-21.01601921],
 [ 29.52665013],],

 [[  2.09443305],
 [-23.86512525],
 [ 26.29226103],],

 [[  4.98113235],
 [-25.54280851],
 [ 29.93287856],],

 [[  1.74157452],
 [-24.84216468],
 [ 29.93003245],],

 [[  2.43940367],
 [-19.88547497],
 [ 27.79254725],],

 [[ -3.10053715],
 [-23.77113799],
 [ 30.17062846],],

 [[ -5.61749134],
 [-21.50063447],
 [ 26.46394553],],

 [[ -9.67426746],
 [-28.07272501],
 [ 27.60980852],],

 [[ -6.4786982 ],
 [-26.73866205],
 [ 33.97917961],],

 [[ -5.76429629],
 [-23.38936992],
 [ 38.97515961],],

 [[-12.81802202],
 [-25.07359239],
 [ 33.7178832 ],],

 [[ -8.90649944],
 [-23.04556626],
 [ 36.26915244],],

 [[-21.39659024],
 [-25.19489658],
 [ 30.88960341],],

 [[-16.96161282],
 [-22.83553902],
 [ 36.80976538],],

 [[-28.24919104],
 [-20.78569643],
 [ 27.13355878],],

 [[-22.92376846],
 [-22.01779818],
 [ 35.26170061],],

 [[-33.91148267],
 [-14.38934572],
 [ 26.62868358],],

 [[-34.22550023],
 [-18.77770434],
 [ 29.5582741 ],],

 [[-35.60477577],
 [-18.37215533],
 [ 31.02289894],],

 [[-38.16595584],
 [-16.27759692],
 [ 29.08630576],],

 [[-42.50069833],
 [-19.03125831],
 [ 29.60822766],],

 [[-46.57689384],
 [-20.50816413],
 [ 28.50414276],],

 [[-48.10523953],
 [-31.02281053],
 [ 44.2502743 ],],

 [[-47.59952035],
 [-27.33037571],
 [ 43.27830306],],

 [[-50.95905904],
 [-27.33212927],
 [ 44.51070502],],

 [[-54.87313746],
 [-25.79724946],
 [ 43.56429004],],

 [[-57.17963823],
 [-20.85728123],
 [ 36.53985817],],

 [[-66.60775276],
 [-32.83314669],
 [ 48.33978993],],

 [[-37.10850972],
 [ 33.87512066],
 [ 60.0133136 ],],

 [[-192.06734052],
 [  -5.80481959],
 [  12.42855991],],

 [[-36.15591403],
 [ 46.40371537],
 [  4.00758326],],

 [[-188.10229355],
 [  -7.43113956],
 [  14.00551046],],

 [[-1.25045757e+02],
 [ 1.27449720e+01],
 [-1.61572078e-03],],

 [[-181.69450967],
 [  -8.50334944],
 [  12.39501496],],

 [[-192.94165574],
 [  -1.31973307],
 [   1.54221682],],

 [[ 335.1867686 ],
 [-504.2893452 ],
 [-632.13655254],],

 [[-181.79484118],
 [  -0.72962046],
 [   1.06808378],],

 [[-80.08935058],
 [ 33.4030252 ],
 [  0.12481424],],

 [[-1.74310668e+02],
 [-6.03189133e-02],
 [ 4.51836016e-01],],
]

ground_truth_position = [
[59.999444659016895, -29.999942263845835, 29.999852995716665],

[59.96822082616301, -29.996695947137226, 29.999550228686786],

[59.94056224293692, -29.993820062922023, 29.99956388674419],

[59.813794047564706, -29.980637808016017, 29.997842020068],

[59.234881382777814, -29.92043347416568, 29.984704260954825],

[57.87446303178046, -29.778944453416308, 29.946842140486567],

[55.8240804132346, -29.565678235390294, 29.902300551106368],

[53.090402359603615, -29.28131635454109, 29.867185890373733],

[50.404928298780796, -29.00194480395517, 29.854880808966694],

[47.6199950980984, -28.712201773650524, 29.867441037507334],

[44.934724809776085, -28.432804292442817, 29.901826713562137],

[42.15041494477614, -28.143078391279335, 29.962427064542503],

[39.46559338314323, -27.86368298205955, 30.022393114032788],

[36.680902887634744, -27.573872929439247, 30.061054181690594],

[33.99545054653017, -27.294370821008357, 30.073999895792685],

[31.210523907584594, -27.004495779056672, 30.064123218163736],

[28.425795924026925, -26.714622639604165, 30.029379480115665],

[25.740909773882496, -26.43512584308706, 29.972006288755697],

[22.95669424681859, -26.14527292166661, 29.908643300772102],

[20.17203310661844, -25.85535867624018, 29.869233748605122],

[17.486597294097553, -25.57576195284857, 29.853769031830794],

[14.701675684958056, -25.28579496674146, 29.863210648283438],

[11.916940520056126, -24.995836158018502, 29.896975422300972],

[9.132604683209964, -24.70590883844252, 29.955022056396803],

[6.447809360716241, -24.426337921154435, 30.01536150060128],

[3.6631446321959573, -24.136359582727973, 30.054403683892613],

[0.9777107974552168, -23.856707784909137, 30.06813700984569],

[-1.8072031169932874, -23.56669026545304, 30.05872277816584],

[-4.492476211836508, -23.287043930114358, 30.02569161757138],

[-7.276810984196881, -22.997076411573374, 29.968206522476706],

[-9.961592077002267, -22.717472561682875, 29.906723842990388],

[-12.746245459557457, -22.42746387622387, 29.867705814320324],

[-15.531135573036376, -22.13742719017403, 29.853087447798828],

[-18.216586904141646, -21.857743917360622, 29.861991506046646],

[-21.001313383362124, -21.56771881841725, 29.895982426070006],

[-23.785640050295108, -21.277733047623222, 29.954167028916064],

[-26.47046371163221, -20.998108496601876, 30.012893916938122],

[-29.255147243531358, -20.70808171815381, 30.05026260285372],

[-31.940585164135754, -20.428389858387483, 30.062144095108426],

[-34.72548879926027, -20.138337022879586, 30.051015853728785],

[-37.410738033337445, -19.858662057886782, 30.016239312459522],

[-40.19503366368798, -19.568669918715955, 29.957186568448126],

[-42.87987527811649, -19.28903506112164, 29.898561619613133],

[-45.66457100418011, -18.99899898054812, 29.86304877416704],

[-48.350012393467146, -18.719299599319253, 29.851083817265526],

[-51.13491109202612, -18.42924036540024, 29.86379811265599],

[-53.91959424999981, -18.13920263199917, 29.90107161470908],

[-56.604424405857564, -17.85956419490137, 29.959208076214967],

[-59.38877558219098, -17.56955929196119, 30.016519558011336],

[-62.07405861982305, -17.28987206421455, 30.047682279065203],

[-64.85897194689058, -16.99980698816448, 30.056292141228102],

[-67.64385032296799, -16.709744766287656, 30.04010755573986],

[-70.32903511829406, -16.430065521753743, 30.000520796486185],

[-73.11325296720433, -16.140070619968757, 29.937850269636158],

[-75.89767118209859, -15.850054126292987, 29.884474060584715],

[-78.58299008791667, -15.570358846686382, 29.856193805520657],

[-81.3679110107102, -15.28028862521321, 29.851501078014024],

[-84.0533114799523, -15.000583562561875, 29.870093640745978],

[-86.73845970964942, -14.720904161559027, 29.911368248352296],

[-89.42323174325264, -14.441263346232969, 29.97237467339528],

[-92.2077169894976, -14.151235971140341, 30.022620709772866],
]

print(len(ground_truth_position), len(estimate_pos))

ground_truth_position = np.array(ground_truth_position)
estimate_pos = np.array(estimate_pos).squeeze()

plt.figure()
plt.plot(np.linalg.norm(ground_truth_position-estimate_pos, axis=1), label='Errors')
plt.xlabel('Time step', fontsize=20)
plt.ylabel('Estimation error', fontsize=20)
plt.legend()
plt.savefig('estimation_comparison_error.png')

plt.figure()
plt.plot(ground_truth_position[:,0], 'g', label='Ground Truth')
plt.plot(estimate_pos[:,0], 'b', label='Estimation Truth')
plt.xlabel('Time step', fontsize=20)
plt.ylabel('x position', fontsize=20)
plt.legend()
plt.savefig('estimation_comparison_x.png')

plt.figure()
plt.plot(ground_truth_position[:,0], np.abs(estimate_pos[:,0] - ground_truth_position[:,0]), label='Errors')
plt.xlabel('Ground truth x position', fontsize=20)
plt.ylabel('x estimation error', fontsize=20)
plt.legend()
plt.savefig('estimation_x_error.png')

plt.figure()
plt.plot(ground_truth_position[:,1], 'g', label='Ground Truth')
plt.plot(estimate_pos[:,1], 'b', label='Estimation Truth')
plt.xlabel('Time step', fontsize=20)
plt.ylabel('y position', fontsize=20)
plt.legend()
plt.savefig('estimation_comparison_y.png')

plt.figure()
plt.plot(ground_truth_position[:,1], np.abs(estimate_pos[:,1] - ground_truth_position[:,1]), label='Errors')
plt.xlabel('Ground truth y position', fontsize=20)
plt.ylabel('y estimation error', fontsize=20)
plt.legend()
plt.savefig('estimation_y_error.png')

plt.figure()
plt.plot(ground_truth_position[:,2], 'g', label='Ground Truth')
plt.plot(estimate_pos[:,2], 'b', label='Estimation Truth')
plt.xlabel('Time step', fontsize=20)
plt.ylabel('z position', fontsize=20)
plt.legend()
plt.savefig('estimation_comparison_z.png')

plt.figure()
plt.plot(ground_truth_position[:,2], np.abs(estimate_pos[:,2] - ground_truth_position[:,2]), label='Errors')
plt.xlabel('Ground truth z position', fontsize=20)
plt.ylabel('z estimation error', fontsize=20)
plt.legend()
plt.savefig('estimation_z_error.png')

plt.show()